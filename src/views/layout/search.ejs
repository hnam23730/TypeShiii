<div class="hero__search">
    <div class="hero__search__form">
        <form action="#" id="searchForm">
            <input type="text" id="searchInput" placeholder="What do you need?" autocomplete="off">
            <button type="submit" class="site-btn">SEARCH</button>
        </form>
        <ul id="searchResults" class="dropdown-menu" style="display: none; position: absolute; z-index: 1000; width: 100%;"></ul>
    </div>
    <div class="hero__search__phone">
        <div class="hero__search__phone__icon">
            <i class="fa fa-phone"></i>
        </div>
        <div class="hero__search__phone__text">
            <h5>+84386604992</h5>
            <span>support 1/3</span>
        </div>
    </div>
</div>

<script>
    const searchInput = document.getElementById('searchInput');
    const searchResults = document.getElementById('searchResults');

    searchInput.addEventListener('input', async function () {
        const query = searchInput.value.trim();
        if (query.length > 0) {
            const response = await fetch(`/search?query=${encodeURIComponent(query)}`);
            const products = await response.json();

            searchResults.innerHTML = '';
            if (products.length > 0) {
                products.forEach(product => {
                    const li = document.createElement('li');
                    li.innerHTML = `<a href="/shop-details/${product.id}" class="dropdown-item">${product.name}</a>`;
                    searchResults.appendChild(li);
                });
                searchResults.style.display = 'block';
            } else {
                searchResults.style.display = 'none';
            }
        } else {
            searchResults.style.display = 'none';
        }
    });

    document.addEventListener('click', function (event) {
        if (!searchResults.contains(event.target) && event.target !== searchInput) {
            searchResults.style.display = 'none';
        }
    });
</script>